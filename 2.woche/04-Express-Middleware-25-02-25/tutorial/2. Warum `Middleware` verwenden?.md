# **2ï¸âƒ£ Neden Middleware KullanÄ±lÄ±r? (Warum Middleware verwenden?)**  

Middleware kullanmanÄ±n en bÃ¼yÃ¼k sebebi, **Express.js'de HTTP isteklerini daha verimli yÃ¶netmek ve dÃ¼zenlemek** istememizdir. Middleware olmadan, her istekte **tekrarlayan kodlar yazmamÄ±z gerekir** ve bu, uygulamanÄ±n yÃ¶netilebilirliÄŸini zorlaÅŸtÄ±rÄ±r.

---

## **ğŸ“Œ Middleware KullanmanÄ±n AvantajlarÄ±**  
Middleware kullanarak ÅŸu avantajlarÄ± elde ederiz:

| **Avantaj** | **AÃ§Ä±klama** |
|------------|-------------|
| âœ… **Kod tekrarÄ±nÄ± azaltÄ±r** | Ortak iÅŸlemleri tek bir yerde yÃ¶netmeyi saÄŸlar. |
| âœ… **Ä°stek ve yanÄ±tlarÄ± dÃ¼zenler** | Gelen veriyi iÅŸleyebilir, deÄŸiÅŸtirebilir ve kontrol edebiliriz. |
| âœ… **GÃ¼venliÄŸi artÄ±rÄ±r** | Kimlik doÄŸrulama, yetkilendirme, CORS gibi gÃ¼venlik Ã¶nlemleri eklenebilir. |
| âœ… **Loglama ve hata yÃ¶netimi saÄŸlar** | Sunucu hatalarÄ±nÄ± kontrol edebilir, loglarÄ± kaydedebiliriz. |
| âœ… **PerformansÄ± optimize eder** | Gereksiz iÅŸ yÃ¼kÃ¼nÃ¼ azaltarak veritabanÄ± veya API isteklerini daha iyi yÃ¶netir. |

---

## **ğŸ“Œ Middleware KullanÄ±m AlanlarÄ±**
Middlewareâ€™i **gerÃ§ek hayatta en Ã§ok kullanÄ±lan alanlarla** aÃ§Ä±klayalÄ±m:

---

### **1ï¸âƒ£ Kod TekrarÄ±nÄ± Azaltma ve ModÃ¼lerlik**
BirÃ§ok rota iÃ§in **tekrarlanan iÅŸlemleri** middleware iÃ§inde yÃ¶netebiliriz.  
Ã–rneÄŸin, **tÃ¼m API isteklerinde loglama yapmak istiyoruz.**  

ğŸ“¢ **EÄŸer Middleware Kullanmazsak**:
```js
app.get("/home", (req, res) => {
  console.log(`[${new Date().toISOString()}] ${req.method} ${req.url}`);
  res.send("Ana Sayfa");
});

app.get("/profile", (req, res) => {
  console.log(`[${new Date().toISOString()}] ${req.method} ${req.url}`);
  res.send("Profil SayfasÄ±");
});
```
**ğŸ’¥ Sorun:**  
- Her rota iÃ§in **loglama kodunu tekrar yazmamÄ±z gerekiyor!**  

âœ… **Middleware Kullanarak Tekrarlayan Kodu Azaltabiliriz:**
```js
const logMiddleware = (req, res, next) => {
  console.log(`[${new Date().toISOString()}] ${req.method} ${req.url}`);
  next(); // Sonraki middleware veya route Ã§alÄ±ÅŸsÄ±n
};

app.use(logMiddleware); // TÃ¼m rotalarda Ã§alÄ±ÅŸtÄ±r

app.get("/home", (req, res) => {
  res.send("Ana Sayfa");
});

app.get("/profile", (req, res) => {
  res.send("Profil SayfasÄ±");
});
```
ğŸ“Œ **Ne deÄŸiÅŸti?**  
âœ… `logMiddleware` fonksiyonunu **tÃ¼m rotalar iÃ§in otomatik Ã§alÄ±ÅŸtÄ±rÄ±yoruz.**  
âœ… ArtÄ±k **her rota iÃ§in loglama kodunu tekrar yazmamÄ±za gerek yok.**  

---

### **2ï¸âƒ£ Gelen ve Giden Veriyi YÃ¶netme**
Middleware kullanarak **istek gÃ¶vdesini (request body) deÄŸiÅŸtirebilir** ve veriyi dÃ¼zenleyebiliriz.  

ğŸ“¢ **Ã–rnek: Ä°steklerde JSON FormatÄ±nÄ± Zorunlu Hale Getirme**
```js
app.use(express.json()); // Middleware: JSON verisini parse eder
```
âœ… **Ne yapar?**  
- **Ä°stek gÃ¶vdesinde JSON olmayan verileri kabul etmez.**  
- **req.body** iÃ§indeki veriyi **JavaScript objesine Ã§evirir.**  
- **Bu middleware olmadan, POST isteklerinde req.body boÅŸ olurdu!**  

---

### **3ï¸âƒ£ Kimlik DoÄŸrulama ve Yetkilendirme (Authentication & Authorization)**
KullanÄ±cÄ±nÄ±n giriÅŸ yapÄ±p yapmadÄ±ÄŸÄ±nÄ± **her rotada tek tek kontrol etmek yerine,** bunu **middleware ile merkezi olarak yÃ¶netebiliriz.**  

ğŸ“¢ **Ã–rnek: JWT Token ile KullanÄ±cÄ± GiriÅŸi KontrolÃ¼**
```js
const authMiddleware = (req, res, next) => {
  const token = req.headers["authorization"];
  if (!token) {
    return res.status(401).json({ message: "Yetkisiz giriÅŸ!" });
  }
  next(); // Token geÃ§erliyse bir sonraki aÅŸamaya devam et
};

app.get("/dashboard", authMiddleware, (req, res) => {
  res.send("Dashboard sayfasÄ±na hoÅŸ geldiniz!");
});
```
ğŸ“Œ **Ne yapar?**  
âœ… `/dashboard` sayfasÄ±na **sadece giriÅŸ yapmÄ±ÅŸ kullanÄ±cÄ±larÄ±n eriÅŸmesine izin verir.**  
âœ… KullanÄ±cÄ± **token gÃ¶ndermemiÅŸse 401 (Unauthorized) hatasÄ± dÃ¶ner.**  

ğŸ’¡ **EÄŸer Middleware kullanmasaydÄ±k, her rotada token kontrolÃ¼ yapmamÄ±z gerekirdi!**  

---

### **4ï¸âƒ£ GÃ¼venlik ve API KorumasÄ±**
Middleware kullanarak **GÃ¼venlik (Security)** Ã¶nlemleri alabiliriz:  

ğŸ“¢ **Ã–rnek: CORS Middleware ile Cross-Origin Ä°stekleri Engelleme**  
```bash
npm install cors
```
```js
import cors from "cors";
app.use(cors()); // TÃ¼m domainlerden gelen isteklere izin ver
```
âœ… **CORS Middleware, farklÄ± domainlerden gelen istekleri kontrol eder.**  
âœ… **Ã–zellikle frontend-backend ayrÄ± olduÄŸunda gereklidir.**  

---

### **5ï¸âƒ£ API TrafiÄŸini YÃ¶nlendirme ve Hata YÃ¶netimi**
âœ… **BazÄ± rotalarÄ± sadece belirli kullanÄ±cÄ±lar gÃ¶rebilir.**  
âœ… **Hata yÃ¶netimi iÃ§in Ã¶zel bir middleware tanÄ±mlayabiliriz.**  

ğŸ“¢ **Ã–rnek: Global Hata YÃ¶netimi Middlewareâ€™i**
```js
app.use((err, req, res, next) => {
  console.error("Hata:", err.message);
  res.status(500).json({ message: "Bir hata oluÅŸtu!" });
});
```
âœ… **Ne yapar?**  
- Express uygulamasÄ± iÃ§inde **bir hata oluÅŸursa**, bu middleware Ã§alÄ±ÅŸÄ±r.  
- KullanÄ±cÄ±ya **500 - Sunucu hatasÄ±** dÃ¶ndÃ¼rÃ¼r.  

ğŸ’¡ **EÄŸer middleware kullanmazsak, hatalar tÃ¼m uygulamayÄ± bozabilir ve dÃ¼zgÃ¼n yÃ¶netilemez!**  

---

## **ğŸ“Œ Middleware KullanmanÄ±n GerÃ§ek Hayattaki Ã–nemi**
GerÃ§ek dÃ¼nya projelerinde middleware **nerelerde kullanÄ±lÄ±yor?**  

| **Middleware KullanÄ±mÄ±** | **GerÃ§ek Hayattaki Ã–rnekler** |
|-----------------|----------------------|
| **Ä°stekleri GÃ¼nlÃ¼kleme (Logging)** | KullanÄ±cÄ± hareketlerini takip etmek iÃ§in |
| **Kimlik DoÄŸrulama (Authentication)** | KullanÄ±cÄ±nÄ±n giriÅŸ yapÄ±p yapmadÄ±ÄŸÄ±nÄ± kontrol etmek iÃ§in |
| **Yetkilendirme (Authorization)** | KullanÄ±cÄ±nÄ±n belirli bir sayfaya eriÅŸim yetkisini kontrol etmek iÃ§in |
| **Hata YÃ¶netimi** | Sunucu hatalarÄ±nÄ± yakalamak ve loglamak iÃ§in |
| **Rate Limiting (SÄ±nÄ±rlama)** | DDOS saldÄ±rÄ±larÄ±na karÅŸÄ± Ã¶nlem almak iÃ§in |
| **CORS GÃ¼venliÄŸi** | APIâ€™ye sadece belirli domainlerden eriÅŸim izni vermek iÃ§in |

---

## **ğŸš€ Ã–zet: Middleware KullanmanÄ±n FaydalarÄ±**
âœ… Middleware kullanarak **kod tekrarÄ±nÄ± azaltÄ±rÄ±z** ve **daha modÃ¼ler bir yapÄ± kurarÄ±z.**  
âœ… APIâ€™ye gelen **istekleri yÃ¶netebilir, filtreleyebilir ve gÃ¼venlik Ã¶nlemleri alabiliriz.**  
âœ… **Kimlik doÄŸrulama, hata yÃ¶netimi, loglama** gibi iÅŸlemleri kolayca yÃ¶netebiliriz.  
âœ… Middleware olmadan, her iÅŸlemi **manuel olarak** her rotaya eklemek zorunda kalÄ±rÄ±z (bu da **kodu yÃ¶netilemez hale getirir!**).  

---

ğŸ“Œ **Sonraki AÅŸama: Middleware NasÄ±l KullanÄ±lÄ±r? (Wie verwendet man Middleware?)**  
ğŸ”¹ EÄŸer buraya kadar her ÅŸey netse, **ÅŸimdi middlewareâ€™i Express iÃ§inde nasÄ±l kullanabileceÄŸimizi detaylÄ±ca inceleyelim!** ğŸš€