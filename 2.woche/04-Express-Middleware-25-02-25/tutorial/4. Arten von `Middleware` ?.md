# **4ï¸âƒ£ Middleware TÃ¼rleri (Arten von Middleware)**  

Express.jsâ€™de middlewareâ€™ler **farklÄ± amaÃ§lara hizmet eden 4 ana kategoriye ayrÄ±lÄ±r**:  

1ï¸âƒ£ **Application-Level Middleware** (Uygulama Seviyesinde Middleware)  
2ï¸âƒ£ **Route-Specific Middleware** (Belirli Rotalar Ä°Ã§in Middleware)  
3ï¸âƒ£ **Error-Handling Middleware** (Hata YÃ¶netimi Middleware)  
4ï¸âƒ£ **Built-in ve Third-Party Middleware** (Dahili ve ÃœÃ§Ã¼ncÃ¼ Taraf Middleware)  

Åimdi her tÃ¼rÃ¼ **detaylÄ±ca inceleyelim ve kod Ã¶rnekleriyle gÃ¶sterelim.** ğŸš€  

---

## **1ï¸âƒ£ Application-Level Middleware (Uygulama Seviyesinde Middleware)**  
ğŸ“Œ **Bu tÃ¼r middleware, uygulamadaki tÃ¼m HTTP istekleri iÃ§in Ã§alÄ±ÅŸÄ±r.**  
ğŸ“Œ **Genellikle `app.use()` ile tanÄ±mlanÄ±r ve tÃ¼m rotalar iÃ§in geÃ§erlidir.**  
ğŸ“Œ **Global iÅŸlemler iÃ§in uygundur (Ã¶rneÄŸin, loglama, yetkilendirme, gÃ¼venlik vb.).**  

### âœ… **Ã–rnek: Loglama Middlewareâ€™i**
```js
app.use((req, res, next) => {
  console.log(`[${new Date().toISOString()}] ${req.method} ${req.url}`);
  next(); // Bir sonraki middleware'e geÃ§
});
```
ğŸ“Œ **Ne yapar?**  
âœ” **Her HTTP isteÄŸini loglar.**  
âœ” **Gelen isteÄŸi engellemez, sadece takip eder.**  
âœ” **TÃ¼m rotalarda otomatik Ã§alÄ±ÅŸÄ±r.**  

---

## **2ï¸âƒ£ Route-Specific Middleware (Belirli Rotalar Ä°Ã§in Middleware)**  
ğŸ“Œ **Bu middleware sadece belirli rotalarda Ã§alÄ±ÅŸÄ±r.**  
ğŸ“Œ **Ã–rneÄŸin, sadece `/profile` rotasÄ±na giriÅŸ yapmÄ±ÅŸ kullanÄ±cÄ±larÄ±n eriÅŸmesine izin verebiliriz.**  

### âœ… **Ã–rnek: KullanÄ±cÄ± GiriÅŸi KontrolÃ¼**
```js
const authMiddleware = (req, res, next) => {
  const token = req.headers["authorization"];
  if (!token) {
    return res.status(401).json({ message: "Yetkisiz giriÅŸ!" });
  }
  next(); // KullanÄ±cÄ± yetkiliyse devam et
};

// Middleware sadece /dashboard rotasÄ±nda Ã§alÄ±ÅŸacak
app.get("/dashboard", authMiddleware, (req, res) => {
  res.send("Dashboard'a hoÅŸ geldiniz!");
});
```
ğŸ“Œ **Ne yapar?**  
âœ” **Sadece `/dashboard` rotasÄ±nda Ã§alÄ±ÅŸÄ±r.**  
âœ” **Yetkilendirme kontrolÃ¼ yapar.**  
âœ” **Token yoksa 401 hatasÄ± dÃ¶ndÃ¼rÃ¼r.**  

---

## **3ï¸âƒ£ Error-Handling Middleware (Hata YÃ¶netimi Middleware)**  
ğŸ“Œ **Expressâ€™te hata yÃ¶netimi iÃ§in Ã¶zel middleware kullanÄ±lÄ±r.**  
ğŸ“Œ **TÃ¼m uygulamayÄ± etkileyecek bÃ¼yÃ¼k hatalarÄ± yakalayabiliriz.**  

### âœ… **Ã–rnek: Global Hata Yakalama Middlewareâ€™i**
```js
app.use((err, req, res, next) => {
  console.error("Hata:", err.message);
  res.status(500).json({ message: "Sunucu HatasÄ±!" });
});
```
ğŸ“Œ **Ne yapar?**  
âœ” **Sunucuda bir hata olursa Ã§alÄ±ÅŸÄ±r.**  
âœ” **KullanÄ±cÄ±ya Ã¶zel bir hata mesajÄ± dÃ¶ndÃ¼rÃ¼r.**  
âœ” **`next(err)` ÅŸeklinde Ã§aÄŸrÄ±larak hatalar buraya yÃ¶nlendirilir.**  

---

## **4ï¸âƒ£ Built-in ve Third-Party Middleware (Dahili ve ÃœÃ§Ã¼ncÃ¼ Taraf Middleware)**  
ğŸ“Œ **Express, bazÄ± hazÄ±r middlewareâ€™leri `built-in` olarak saÄŸlar.**  
ğŸ“Œ **Ek olarak, `npm` Ã¼zerinden Ã¼Ã§Ã¼ncÃ¼ taraf middlewareâ€™ler yÃ¼kleyebiliriz.**  

---

### **ğŸ“Œ Dahili (Built-in) Middlewareâ€™ler**
ğŸ“Œ **Express tarafÄ±ndan hazÄ±r olarak gelen middlewareâ€™lerdir.**  
ğŸ“Œ **Kurulum yapmadan doÄŸrudan kullanabiliriz.**  

| **Middleware** | **Ne Ä°ÅŸe Yarar?** |
|---------------|------------------|
| `express.json()` | JSON formatÄ±ndaki verileri iÅŸler |
| `express.urlencoded()` | Form verilerini iÅŸler |
| `express.static()` | Statik dosya sunucusu oluÅŸturur |

âœ… **Ã–rnek: `express.json()` KullanÄ±mÄ±**  
```js
app.use(express.json()); // JSON formatÄ±ndaki istekleri parse eder
```
ğŸ“Œ **Bu middleware olmadan, `req.body` kullanamazdÄ±k!**  

---

### **ğŸ“Œ ÃœÃ§Ã¼ncÃ¼ Taraf (Third-Party) Middlewareâ€™ler**
ğŸ“Œ **Express dÄ±ÅŸÄ±ndaki geliÅŸtiriciler tarafÄ±ndan oluÅŸturulan middlewareâ€™lerdir.**  
ğŸ“Œ **Ã–zellikle gÃ¼venlik, loglama ve yetkilendirme iÃ§in kullanÄ±lÄ±r.**  
ğŸ“Œ **`npm install` ile projeye eklenir.**  

| **Middleware** | **Ne Ä°ÅŸe Yarar?** |
|---------------|------------------|
| `cors` | Cross-Origin istekleri yÃ¶netir |
| `morgan` | HTTP isteklerini loglar |
| `helmet` | GÃ¼venlik iÃ§in baÅŸlÄ±klarÄ± (headers) dÃ¼zenler |
| `express-rate-limit` | APIâ€™ye gelen istekleri sÄ±nÄ±rlar |

âœ… **Ã–rnek: `morgan` Middleware KullanÄ±mÄ±**  
```bash
npm install morgan
```
```js
import morgan from "morgan";
app.use(morgan("dev")); // TÃ¼m HTTP isteklerini loglar
```
ğŸ“Œ **Ne yapar?**  
âœ” **Ä°steklerin method ve URL bilgilerini kaydeder.**  
âœ” **GeliÅŸtirme ortamÄ±nda faydalÄ±dÄ±r.**  

---

## **ğŸš€ Ã–zet: Middleware TÃ¼rleri**
| **Middleware TÃ¼rÃ¼** | **Ne Ä°ÅŸe Yarar?** | **KullanÄ±m AlanÄ±** |
|---------------------|------------------|--------------------|
| **Application-Level Middleware** | TÃ¼m uygulamada Ã§alÄ±ÅŸÄ±r | Loglama, gÃ¼venlik, yetkilendirme |
| **Route-Specific Middleware** | Sadece belirli rotalarda Ã§alÄ±ÅŸÄ±r | KullanÄ±cÄ± giriÅŸ doÄŸrulama |
| **Error-Handling Middleware** | HatalarÄ± yakalar ve yÃ¶netir | Sunucu hatalarÄ±nÄ± kontrol etme |
| **Built-in & Third-Party Middleware** | Express ve npm paketlerinden middleware kullanÄ±mÄ± | JSON parse, gÃ¼venlik, rate limiting |

---

ğŸ“Œ **Åimdiye kadar ÅŸunlarÄ± Ã¶ÄŸrendik:**  
âœ… **Middleware Nedir?**  
âœ… **Neden Middleware KullanÄ±lÄ±r?**  
âœ… **Middleware NasÄ±l KullanÄ±lÄ±r?**  
âœ… **Middleware TÃ¼rleri Nelerdir?**  

ğŸš€ **ArtÄ±k Middlewareâ€™i profesyonel bir ÅŸekilde kullanmaya hazÄ±rsÄ±n!**  
ğŸ‘‰ **Bir sonraki adÄ±m:** GerÃ§ek projelerde Middleware kullanÄ±mÄ±! ğŸ’¡