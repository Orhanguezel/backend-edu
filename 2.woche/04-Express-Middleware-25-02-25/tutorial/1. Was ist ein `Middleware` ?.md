# **1ï¸âƒ£ Middleware Nedir? (Was ist ein Middleware?)**  

Middleware, **Express.js iÃ§inde istek (request) ve yanÄ±t (response) arasÄ±nda Ã§alÄ±ÅŸan Ã¶zel bir fonksiyondur.**  
Bir HTTP isteÄŸi sunucuya ulaÅŸtÄ±ÄŸÄ±nda ve yanÄ±t istemciye dÃ¶nmeden Ã¶nce **bir veya birden fazla middleware fonksiyonu devreye girer** ve isteÄŸi iÅŸleyebilir, deÄŸiÅŸtirebilir veya yÃ¶nlendirebilir.  

---

## **ğŸ“Œ Middleware'in Temel GÃ¶revi**  
Middlewareâ€™in temel gÃ¶revi **Express uygulamasÄ±ndaki HTTP isteklerini ve yanÄ±tlarÄ±nÄ± yÃ¶netmektir.**  
ğŸ“Œ **Ne yapabilir?**  
âœ… Gelen isteÄŸi (request) deÄŸiÅŸtirebilir.  
âœ… KullanÄ±cÄ±nÄ±n yetkisini kontrol edebilir (Authentication).  
âœ… Loglama (Logging) yapabilir.  
âœ… GÃ¼venlik kontrolleri ekleyebilir (CORS, Rate Limit vb.).  
âœ… Hata yÃ¶netimi yapabilir.  
âœ… API isteklerini filtreleyebilir.  

---

## **ğŸ“Œ Middlewareâ€™in Ã‡alÄ±ÅŸma MantÄ±ÄŸÄ±**  

ğŸ“¢ **Middleware, `req` (istek) ile `res` (yanÄ±t) arasÄ±ndaki iÅŸlemleri yapar ve `next()` fonksiyonu ile sonraki aÅŸamaya geÃ§iÅŸi saÄŸlar.**  

Bir middleware **3 parametre** alÄ±r:  
```js
(req, res, next) => { ... }
```
ğŸ“Œ **AnlamlarÄ±:**  
âœ” `req` â†’ KullanÄ±cÄ±nÄ±n yaptÄ±ÄŸÄ± HTTP isteÄŸi (**Request**)  
âœ” `res` â†’ Sunucunun kullanÄ±cÄ±ya vereceÄŸi yanÄ±t (**Response**)  
âœ” `next` â†’ Bir sonraki middlewareâ€™e geÃ§iÅŸ yapmak iÃ§in kullanÄ±lan fonksiyon  

### **ğŸ“Œ Middleware Ã‡alÄ±ÅŸma SÄ±rasÄ± (Flow)**
1ï¸âƒ£ KullanÄ±cÄ± bir **istek (request)** gÃ¶nderir.  
2ï¸âƒ£ Ä°lk middleware Ã§alÄ±ÅŸÄ±r ve isteÄŸi iÅŸler.  
3ï¸âƒ£ `next()` Ã§aÄŸrÄ±ldÄ±ÄŸÄ±nda **sonraki middleware** Ã§alÄ±ÅŸÄ±r.  
4ï¸âƒ£ Son middleware tamamlandÄ±ÄŸÄ±nda **yanÄ±t (response) istemciye dÃ¶ndÃ¼rÃ¼lÃ¼r.**  

---

## **ğŸ“Œ Middleware NasÄ±l KullanÄ±lÄ±r?**
Middleware, Express iÃ§inde **`app.use()` fonksiyonu** ile kullanÄ±lÄ±r.  

ğŸ“¢ **Ã–rnek 1: Basit Middleware**  
AÅŸaÄŸÄ±daki middleware her istekte Ã§alÄ±ÅŸÄ±r ve **hangi isteÄŸin geldiÄŸini loglar.**  

```js
import express from "express";

const app = express();

// Middleware: Her isteÄŸi loglar
app.use((req, res, next) => {
  console.log(`Ä°stek yapÄ±ldÄ±: ${req.method} ${req.url}`);
  next(); // Sonraki aÅŸamaya geÃ§
});

app.get("/", (req, res) => {
  res.send("Ana Sayfa");
});

app.listen(5000, () => console.log("Server Ã§alÄ±ÅŸÄ±yor..."));
```
ğŸ“Œ **Ne yapar?**  
âœ” Sunucuya her istek geldiÄŸinde **istek tÃ¼rÃ¼nÃ¼ (GET, POST vb.) ve URLâ€™yi konsola yazdÄ±rÄ±r.**  
âœ” `next()` Ã§aÄŸrÄ±ldÄ±ÄŸÄ± iÃ§in istek **diÄŸer middlewareâ€™lere veya rotalara devam edebilir.**  

---

## **ğŸ“Œ Middleware OlmasaydÄ± Ne Olurdu?**
Expressâ€™te middleware olmasaydÄ±:  
âŒ **Kod tekrarlarÄ± artardÄ±.** (Her rotada aynÄ± kontrolleri yapmak zorunda kalÄ±rdÄ±k.)  
âŒ **GÃ¼venlik yÃ¶netimi zorlaÅŸÄ±rdÄ±.**  
âŒ **API kontrolÃ¼ ve hata yÃ¶netimi verimsiz olurdu.**  
âŒ **Kod okunabilirliÄŸi ve yÃ¶netilebilirliÄŸi dÃ¼ÅŸerdi.**  

---

## **ğŸ“Œ Middleware Ã‡eÅŸitleri Nelerdir?**
Middlewareâ€™ler farklÄ± amaÃ§larla kullanÄ±labilir. Express iÃ§inde **4 ana middleware tÃ¼rÃ¼** vardÄ±r:  

| **Middleware TÃ¼rÃ¼** | **Ne Ä°ÅŸe Yarar?** |
|-----------------|----------------------|
| **Uygulama Middleware (Application Middleware)** | `app.use()` ile tÃ¼m isteklerde Ã§alÄ±ÅŸÄ±r |
| **Route-Specific Middleware (Rota Ã–zel Middleware)** | Sadece belirli bir rota iÃ§in Ã§alÄ±ÅŸÄ±r |
| **Hata YÃ¶netimi Middleware (Error-Handling Middleware)** | Hata durumlarÄ±nda Ã¶zel iÅŸlem yapar |
| **Built-in ve ÃœÃ§Ã¼ncÃ¼ Taraf Middlewareâ€™ler** | Express'in saÄŸladÄ±ÄŸÄ± veya dÄ±ÅŸ kÃ¼tÃ¼phanelerden gelen middlewareâ€™lerdir |

Bu konulara ilerleyen aÅŸamalarda daha detaylÄ± bakacaÄŸÄ±z.  

---

## **ğŸ“Œ Ã–zet**
âœ… **Middleware, HTTP isteÄŸi ve yanÄ±tÄ± arasÄ±nda Ã§alÄ±ÅŸan bir fonksiyondur.**  
âœ… **Express iÃ§inde `app.use()` ile tanÄ±mlanÄ±r.**  
âœ… **Middleware, gelen isteÄŸi deÄŸiÅŸtirebilir, yÃ¶nlendirebilir veya engelleyebilir.**  
âœ… **Hata yÃ¶netimi, yetkilendirme, loglama gibi gÃ¶revler iÃ§in kullanÄ±lÄ±r.**  

ğŸ’¡ **Middleware, Express'in en gÃ¼Ã§lÃ¼ Ã¶zelliklerinden biridir ve backend geliÅŸtirme iÃ§in kesinlikle Ã¶ÄŸrenilmesi gereken bir konudur!** ğŸš€  

---  
ğŸ“Œ **Sonraki AÅŸama: Neden Middleware KullanÄ±lÄ±r? (Warum Middleware verwenden?)**  
ğŸ“¢ EÄŸer buraya kadar her ÅŸey anlaÅŸÄ±ldÄ±ysa, **middleware kullanmanÄ±n avantajlarÄ±nÄ± detaylÄ±ca inceleyelim!** ğŸš€