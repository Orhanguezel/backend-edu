# **ğŸ“Œ 5. Bir Sunucu JSON ile NasÄ±l YanÄ±t Verir?**
REST API'ler **genellikle JSON formatÄ±nda veri dÃ¶ndÃ¼rÃ¼r**.  
ğŸ“Œ **JSON (JavaScript Object Notation), hafif, okunabilir ve yapÄ±landÄ±rÄ±lmÄ±ÅŸ bir veri formatÄ±dÄ±r.**  
JSON, **istemci (Client) ile sunucu (Server) arasÄ±nda veri alÄ±ÅŸveriÅŸi iÃ§in en yaygÄ±n kullanÄ±lan formattÄ±r.**  

---

## **ğŸš€ Express.js ile JSON YanÄ±t DÃ¶ndÃ¼rme**
Express.js kullanarak bir sunucu oluÅŸturduÄŸumuzda, **`res.json()`** metoduyla JSON formatÄ±nda yanÄ±t dÃ¶ndÃ¼rebiliriz.  

### **ğŸ“Œ 1ï¸âƒ£ Express.js ile Basit Bir JSON YanÄ±tÄ±**
```javascript
import express from "express";

const app = express();
app.use(express.json());

app.get("/", (req, res) => {
    res.json({ message: "Merhaba, bu bir JSON yanÄ±tÄ±dÄ±r!" });
});

const port = 3001;
app.listen(port, () => console.log(`Server running on port ${port}`));
```
âœ… **Sunucuyu Ã§alÄ±ÅŸtÄ±r:**  
```bash
node server.js
```
âœ… **Test Et:**  
```bash
curl -X GET http://localhost:3001/
```
âœ… **YanÄ±t:**  
```json
{
  "message": "Merhaba, bu bir JSON yanÄ±tÄ±dÄ±r!"
}
```
---

## **ğŸ“Œ 2ï¸âƒ£ JSON FormatÄ±nda Veri DÃ¶ndÃ¼rmek**
Bir **REST API**, verileri JSON formatÄ±nda dÃ¶ndÃ¼rerek istemciye bilgi saÄŸlar.  
Ã–rneÄŸin, **kullanÄ±cÄ± listesini JSON formatÄ±nda dÃ¶ndÃ¼relim:**

```javascript
const users = [
    { id: 1, name: "Ali", email: "ali@example.com" },
    { id: 2, name: "AyÅŸe", email: "ayse@example.com" }
];

app.get("/users", (req, res) => {
    res.json(users);
});
```

âœ… **Test Et:**  
```bash
curl -X GET http://localhost:3001/users
```
âœ… **YanÄ±t:**  
```json
[
  { "id": 1, "name": "Ali", "email": "ali@example.com" },
  { "id": 2, "name": "AyÅŸe", "email": "ayse@example.com" }
]
```
---

## **ğŸ“Œ 3ï¸âƒ£ JSON FormatÄ±nda Tekil Veri DÃ¶ndÃ¼rmek**
**Belirli bir kullanÄ±cÄ±yÄ± IDâ€™ye gÃ¶re JSON formatÄ±nda dÃ¶ndÃ¼relim:**
```javascript
app.get("/users/:id", (req, res) => {
    const user = users.find(u => u.id === parseInt(req.params.id));
    if (!user) return res.status(404).json({ error: "User not found!" });
    res.json(user);
});
```
âœ… **Test Et:**  
```bash
curl -X GET http://localhost:3001/users/1
```
âœ… **YanÄ±t:**  
```json
{
  "id": 1,
  "name": "Ali",
  "email": "ali@example.com"
}
```
---

## **ğŸ“Œ 4ï¸âƒ£ Hata MesajlarÄ±nÄ± JSON Olarak DÃ¶ndÃ¼rmek**
ğŸ“Œ **EÄŸer istenen kullanÄ±cÄ± bulunamazsa, 404 Hata MesajÄ± JSON formatÄ±nda dÃ¶ndÃ¼rÃ¼lebilir.**  

```javascript
app.get("/users/:id", (req, res) => {
    const user = users.find(u => u.id === parseInt(req.params.id));
    if (!user) {
        return res.status(404).json({ error: "User not found!" });
    }
    res.json(user);
});
```

âœ… **YanlÄ±ÅŸ ID ile Test Et:**  
```bash
curl -X GET http://localhost:3001/users/99
```
âœ… **YanÄ±t (404 Hata):**  
```json
{
  "error": "User not found!"
}
```
ğŸ“Œ **Sunucu, hata durumlarÄ±nda bile JSON formatÄ±nda yanÄ±t verir.**  

---

## **ğŸ“Œ 5ï¸âƒ£ JSON FormatÄ±nda Veri Ekleme (POST)**
Ä°stemciden gelen **JSON verisini alÄ±p**, yanÄ±t olarak JSON formatÄ±nda geri dÃ¶ndÃ¼relim.

```javascript
app.post("/users", (req, res) => {
    const newUser = { id: users.length + 1, ...req.body };
    users.push(newUser);
    res.status(201).json(newUser);
});
```
âœ… **Test Et (Yeni KullanÄ±cÄ± Ekleme):**  
```bash
curl -X POST http://localhost:3001/users \
     -H "Content-Type: application/json" \
     -d '{"name": "Mehmet", "email": "mehmet@example.com"}'
```
âœ… **YanÄ±t:**  
```json
{
  "id": 3,
  "name": "Mehmet",
  "email": "mehmet@example.com"
}
```
---

## **ğŸ“Œ Ã–zet**
| **Konu** | **AÃ§Ä±klama** |
|----------|-------------|
| **`res.json()`** | JSON formatÄ±nda veri dÃ¶ndÃ¼rmek iÃ§in kullanÄ±lÄ±r. |
| **Tek bir veri dÃ¶ndÃ¼rme** | `GET /users/:id` â†’ `{ "id": 1, "name": "Ali" }` |
| **Liste dÃ¶ndÃ¼rme** | `GET /users` â†’ `[{ "id": 1, "name": "Ali" }]` |
| **Hata mesajlarÄ±nÄ± JSON olarak dÃ¶ndÃ¼rme** | `{ "error": "User not found!" }` |
| **Ä°stemciden JSON veri alma** | `app.use(express.json());` |
| **Yeni JSON veri ekleme (POST)** | `POST /users` ile yeni kullanÄ±cÄ± ekleme |

ğŸš€ **Sonraki Konu:** **Sunucu JSON verisini nasÄ±l anlar? (`express.json()`)** ğŸ¯  
Bunun hakkÄ±nda konuÅŸalÄ±m mÄ±? ğŸ˜Š