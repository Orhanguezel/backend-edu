## **2ï¸âƒ£ MongoDB'ye Devam (Fortsetzung)**  

Bir Ã¶nceki derslerde MongoDBâ€™nin temel komutlarÄ±nÄ± Ã¶ÄŸrendik ve terminal (mongosh) Ã¼zerinden CRUD iÅŸlemleri gerÃ§ekleÅŸtirdik. **Bu derste daha derinlemesine konulara odaklanacaÄŸÄ±z.**

---

### **ğŸ“Œ GÃ¼ndem**
1. **MongoDB BaÄŸlantÄ± YÃ¶ntemleri** (Compass, Terminal, Node.js)
2. **Ä°leri Seviye CRUD Ä°ÅŸlemleri**
3. **Index KullanÄ±mÄ± ve Performans Optimizasyonu**
4. **Aggregation Framework ile Veri Ä°ÅŸleme**
5. **MongoDB ile Kimlik DoÄŸrulama ve Yetkilendirme**

---

## **1ï¸âƒ£ MongoDBâ€™ye BaÄŸlanma**
MongoDBâ€™ye farklÄ± yÃ¶ntemlerle baÄŸlanabiliriz:
### **1ï¸âƒ£ Terminal Ã¼zerinden (mongosh)**
MongoDB'nin yÃ¼klÃ¼ olduÄŸu sistemde ÅŸu komut ile baÄŸlanabiliriz:
```bash
mongosh
```
EÄŸer farklÄ± bir sunucuya baÄŸlanmak istiyorsak:
```bash
mongosh "mongodb://kullaniciadi:sifre@host:port/veritabani"
```

### **2ï¸âƒ£ MongoDB Compass ile BaÄŸlanma**
MongoDB Compass GUI aracÄ±nÄ± aÃ§arak, **"New Connection"** butonuna tÄ±klayÄ±p `mongodb://localhost:27017` yazÄ±larak baÄŸlanÄ±labilir.

### **3ï¸âƒ£ Node.js ile MongoDB'ye BaÄŸlanma**
MongoDBâ€™yi bir **Node.js uygulamasÄ±** ile kullanmak iÃ§in **MongoDB Driver** yÃ¼klenir:
```bash
npm install mongodb
```
BaÄŸlantÄ± kodu:
```js
import { MongoClient } from "mongodb";

const uri = "mongodb://localhost:27017";
const client = new MongoClient(uri);

async function connectDB() {
    try {
        await client.connect();
        console.log("MongoDB'ye baÅŸarÄ±yla baÄŸlanÄ±ldÄ±.");
    } catch (err) {
        console.error("BaÄŸlantÄ± hatasÄ±:", err);
    }
}
connectDB();
```

---

## **2ï¸âƒ£ Ä°leri Seviye CRUD Ä°ÅŸlemleri**
MongoDB'de temel CRUD iÅŸlemleri Ã¶ÄŸrendik, ÅŸimdi daha **ileri seviye kullanÄ±m Ã¶rneklerine** bakalÄ±m.

### **ğŸ”¹ 1. Belirli AlanlarÄ± Getirme (`projection`)**
Bir sorgu sonucunda sadece belirli alanlarÄ± gÃ¶rmek iÃ§in `projection` kullanÄ±lÄ±r.

```js
db.kediler.find({}, { name: 1, age: 1, _id: 0 });
```
Bu sorgu sadece **`name` ve `age` alanlarÄ±nÄ±** gÃ¶sterir, `_id` alanÄ±nÄ± gÃ¶stermez.

---

### **ğŸ”¹ 2. Ã‡oklu Veri Ekleme (`insertMany`)**
```js
db.kediler.insertMany([
  { name: "Luna", age: 3, color: "Siyah" },
  { name: "Leo", age: 2, color: "Beyaz" },
  { name: "Milo", age: 4, color: "Gri" }
]);
```

---

### **ğŸ”¹ 3. Ã‡oklu GÃ¼ncelleme (`updateMany`)**
```js
db.kediler.updateMany({ color: "Beyaz" }, { $set: { color: "GÃ¼mÃ¼ÅŸ" } });
```
Bu sorgu, **tÃ¼m beyaz kedileri "GÃ¼mÃ¼ÅŸ" yapar**.

---

### **ğŸ”¹ 4. Silme Ä°ÅŸlemleri (`deleteOne` & `deleteMany`)**
```js
db.kediler.deleteOne({ name: "Milo" });
```
Bu sorgu **sadece ilk Milo adlÄ± kediyi siler**.

```js
db.kediler.deleteMany({ age: { $gte: 4 } });
```
Bu sorgu **yaÅŸÄ± 4 ve Ã¼zeri olan tÃ¼m kedileri siler**.

---

## **3ï¸âƒ£ Index KullanÄ±mÄ± ve Performans Optimizasyonu**
EÄŸer bir koleksiyonda Ã§ok fazla veri varsa, sorgular **yavaÅŸlayabilir**. Bunu Ã¶nlemek iÃ§in **index** oluÅŸturulur.

```js
db.kediler.createIndex({ name: 1 });
```
Bu index, `name` alanÄ±na gÃ¶re hÄ±zlÄ± arama yapmamÄ±zÄ± saÄŸlar.

Mevcut indeksleri gÃ¶rmek iÃ§in:
```js
db.kediler.getIndexes();
```

Bir sorgunun performansÄ±nÄ± analiz etmek iÃ§in:
```js
db.kediler.find({ name: "Luna" }).explain("executionStats");
```

---

## **4ï¸âƒ£ Aggregation Framework ile Veri Ä°ÅŸleme**
Aggregation, MongoDB'de bÃ¼yÃ¼k verileri analiz etmek ve iÅŸlem yapmak iÃ§in kullanÄ±lÄ±r.

### **ğŸ”¹ 1. Veri Gruplama (`$group`)**
KaÃ§ tane farklÄ± renkte kedi olduÄŸunu gÃ¶rmek iÃ§in:
```js
db.kediler.aggregate([
  { $group: { _id: "$color", toplam: { $sum: 1 } } }
]);
```

---

### **ğŸ”¹ 2. OrtalamalarÄ± Hesaplama (`$avg`)**
Ortalama yaÅŸ hesaplama:
```js
db.kediler.aggregate([
  { $group: { _id: null, ortalamaYas: { $avg: "$age" } } }
]);
```

---

### **5ï¸âƒ£ MongoDB Kimlik DoÄŸrulama ve Yetkilendirme**
MongoDBâ€™de yetkilendirme aktifleÅŸtirmek iÃ§in kullanÄ±cÄ± oluÅŸturulur:

```js
use admin;
db.createUser({
  user: "admin",
  pwd: "gÃ¼Ã§lÃ¼ÅŸifre",
  roles: [{ role: "userAdminAnyDatabase", db: "admin" }]
});
```
SonrasÄ±nda MongoDB'ye ÅŸu ÅŸekilde baÄŸlanÄ±labilir:
```bash
mongosh -u admin -p gÃ¼Ã§lÃ¼ÅŸifre --authenticationDatabase admin
```

---

## **ğŸ“Œ Ã–zet**
- **MongoDBâ€™ye farklÄ± baÄŸlantÄ± yÃ¶ntemlerini** Ã¶ÄŸrendik.
- **Ä°leri seviye CRUD iÅŸlemleri** ile verileri daha iyi yÃ¶nettik.
- **Index kullanarak performansÄ± optimize ettik**.
- **Aggregation framework ile bÃ¼yÃ¼k veriler Ã¼zerinde analizler yaptÄ±k**.
- **MongoDBâ€™de kimlik doÄŸrulama ve yetkilendirmeyi** inceledik.

ğŸš€ **Sonraki adÄ±m: MongoDB Compass ile veri yÃ¶netimini detaylandÄ±rmak!**