## **3. Was ist `Soft Delete` und `Hard Delete`?**  
**(`Soft` Silme ve `Hard` Silme nedir?)**  

MongoDBâ€™de bir belgeyi silmek iÃ§in **iki temel yÃ¶ntem** vardÄ±r:  
1. **`Hard Delete` (Tamamen Silme)** â†’ **Veri tamamen veritabanÄ±ndan kaldÄ±rÄ±lÄ±r.**  
2. **`Soft Delete` (YumuÅŸak Silme)** â†’ **Veri veritabanÄ±nda kalÄ±r, ancak "silindi" olarak iÅŸaretlenir.**  

---

## **ğŸ“Œ 3.1. `Hard Delete` (KalÄ±cÄ± Silme)**
**Belge (`document`) tamamen silinir ve geri alÄ±namaz!**  
- **Avantaj:** VeritabanÄ± temiz kalÄ±r, gereksiz veri kalmaz.  
- **Dezavantaj:** YanlÄ±ÅŸlÄ±kla silinen veriler kurtarÄ±lamaz.  

### **Ã–rnek: `findByIdAndDelete()` ile `Hard Delete`**
```js
const deleteUser = async (req, res) => {
  try {
    const user = await User.findByIdAndDelete(req.params.id);
    if (!user) return res.status(404).json({ msg: "Benutzer nicht gefunden!" });

    res.json({ msg: "Benutzer erfolgreich gelÃ¶scht!" });
  } catch (error) {
    res.status(500).json({ error });
  }
};
```
âœ… **Burada kullanÄ±cÄ± tamamen silinir ve geri alÄ±namaz.**  

---

## **ğŸ“Œ 3.2. `Soft Delete` (YumuÅŸak Silme)**
- **Belge silinmez, sadece `isDeleted: true` olarak iÅŸaretlenir.**  
- **Avantaj:** YanlÄ±ÅŸlÄ±kla silinen veriler daha sonra kurtarÄ±labilir.  
- **Dezavantaj:** VeritabanÄ± bÃ¼yÃ¼yebilir, performans etkilenebilir.  

### **Ã–rnek: `isDeleted` AlanÄ± ile `Soft Delete`**
Ã–ncelikle `User` ÅŸemasÄ±na **`isDeleted` alanÄ±nÄ± ekleyelim**:  
```js
const userSchema = new Schema({
  firstName: String,
  lastName: String,
  isDeleted: { type: Boolean, default: false } // ğŸ”¹ VarsayÄ±lan olarak "false"
});
```

**Sonra `Soft Delete` fonksiyonunu yazalÄ±m:**  
```js
const softDeleteUser = async (req, res) => {
  try {
    const user = await User.findByIdAndUpdate(
      req.params.id, 
      { isDeleted: true }, 
      { new: true }
    );
    if (!user) return res.status(404).json({ msg: "Benutzer nicht gefunden!" });

    res.json({ msg: "Benutzer wurde markiert als gelÃ¶scht!", user });
  } catch (error) {
    res.status(500).json({ error });
  }
};
```
âœ… **Bu fonksiyon, kullanÄ±cÄ±yÄ± tamamen silmez, sadece `isDeleted: true` yapar.**  

---

## **ğŸ“Œ 3.3. `Soft Delete` Kullanan GET Fonksiyonu**
EÄŸer bir **`isDeleted: true` olan kayÄ±tlarÄ± gÃ¶stermemek** istiyorsak, `find()` sorgularÄ±nda bunu filtreleyebiliriz.

```js
const getUsers = async (req, res) => {
  try {
    const users = await User.find({ isDeleted: false });
    res.json(users);
  } catch (error) {
    res.status(500).json({ error });
  }
};
```
âœ… **BÃ¶ylece `isDeleted: true` olan kullanÄ±cÄ±lar gizlenir.** ğŸš€  

---

## **ğŸ“Œ 3.4. `Soft Delete` Verileri Kurtarma (`Restore`)**
EÄŸer `isDeleted: true` olan bir kullanÄ±cÄ±yÄ± geri almak istiyorsak:

```js
const restoreUser = async (req, res) => {
  try {
    const user = await User.findByIdAndUpdate(
      req.params.id, 
      { isDeleted: false }, 
      { new: true }
    );
    if (!user) return res.status(404).json({ msg: "Benutzer nicht gefunden!" });

    res.json({ msg: "Benutzer wiederhergestellt!", user });
  } catch (error) {
    res.status(500).json({ error });
  }
};
```
âœ… **Bu sayede yanlÄ±ÅŸlÄ±kla silinen veriler kurtarÄ±labilir.** ğŸ”„  

---

## **ğŸ“Œ 3.5. `Soft Delete` ve `Hard Delete` KarÅŸÄ±laÅŸtÄ±rmasÄ±**
| Ã–zellik | `Soft Delete` | `Hard Delete` |
|---------|--------------|--------------|
| **Veri tamamen silinir mi?** | âŒ HayÄ±r | âœ… Evet |
| **Geri alÄ±nabilir mi?** | âœ… Evet | âŒ HayÄ±r |
| **VeritabanÄ± bÃ¼yÃ¼r mÃ¼?** | âœ… Evet (Silinen veriler kalÄ±r) | âŒ HayÄ±r |
| **Performans etkilenir mi?** | ğŸ”¸ BÃ¼yÃ¼k verilerde olabilir | âœ… Daha iyi performans |
| **En Ã§ok hangi durumlarda kullanÄ±lÄ±r?** | KullanÄ±cÄ± hesaplarÄ±, sipariÅŸler, yorumlar | Loglar, geÃ§ici veriler, Ã¶nemsiz kayÄ±tlar |

---

## **ğŸ“Œ 3.6. SonuÃ§**
ğŸ¯ **`Hard Delete` (Tam Silme)** â†’ Veri tamamen kaybolur.  
ğŸ¯ **`Soft Delete` (YumuÅŸak Silme)** â†’ Veri iÅŸaretlenir ama veritabanÄ±nda kalÄ±r.  

ğŸš€ **Genellikle `Soft Delete`, yanlÄ±ÅŸlÄ±kla veri kaybÄ±nÄ± Ã¶nlemek iÃ§in daha gÃ¼venlidir!** ğŸ’¡