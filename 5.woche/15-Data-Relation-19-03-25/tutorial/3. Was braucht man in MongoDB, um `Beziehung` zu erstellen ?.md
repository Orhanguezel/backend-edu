### **3. Was braucht man in MongoDB, um `Beziehung` zu erstellen?**  
(**MongoDB'de iliÅŸki oluÅŸturmak iÃ§in ne gereklidir?**)

MongoDB, iliÅŸkisel (SQL) veritabanlarÄ±ndan farklÄ± olarak **ÅŸemasÄ± esnek** ve **dokÃ¼man tabanlÄ±** bir veritabanÄ±dÄ±r. Ancak veriler arasÄ±nda **iliÅŸkiler** oluÅŸturmak iÃ§in bazÄ± teknikler kullanabiliriz.

MongoDBâ€™de **iliÅŸkileri oluÅŸturmak iÃ§in temel olarak iki yÃ¶ntem** vardÄ±r:

1ï¸âƒ£ **Embedded Documents (Ä°Ã§ iÃ§e geÃ§miÅŸ dokÃ¼manlar)**  
2ï¸âƒ£ **References (ObjectId ile baÄŸlantÄ± - `populate()` kullanÄ±mÄ±)**  

BunlarÄ± **hangi durumda kullanacaÄŸÄ±mÄ±za** ve **nasÄ±l oluÅŸturacaÄŸÄ±mÄ±za** bakalÄ±m.

---

## **ğŸ“Œ 1ï¸âƒ£ Embedded Documents (Ä°Ã§ Ä°Ã§e GeÃ§miÅŸ DokÃ¼manlar)**  

**TanÄ±m:**  
- **Ä°liÅŸkili veriler ana dokÃ¼manÄ±n iÃ§inde bir alt alan (sub-document) olarak saklanÄ±r.**  
- **Her zaman birlikte kullanÄ±lacak veriler iÃ§in idealdir.**  
- **Tek sorguda tÃ¼m verilere ulaÅŸÄ±labilir.**  

ğŸ“Œ **Ã–rnek:** **Bir kullanÄ±cÄ±nÄ±n adres bilgisi**  

```javascript
const userSchema = new mongoose.Schema({
  name: String,
  email: String,
  address: {
    street: String,
    city: String,
    zip: String
  }
});

export const User = mongoose.model("User", userSchema);
```

ğŸ“Œ **Veriyi Kaydetme:**
```javascript
const newUser = new User({
  name: "Ahmet YÄ±lmaz",
  email: "ahmet@gmail.com",
  address: {
    street: "AtatÃ¼rk Cd.",
    city: "Ä°stanbul",
    zip: "34000"
  }
});
await newUser.save();
```

ğŸ“Œ **AvantajlarÄ±:**
âœ… **Tek sorguda** tÃ¼m verilere ulaÅŸÄ±labilir.  
âœ… Daha **hÄ±zlÄ± okuma iÅŸlemleri** yapÄ±lÄ±r.  

ğŸ“Œ **DezavantajlarÄ±:**
âŒ Veri **Ã§ok bÃ¼yÃ¼rse**, dokÃ¼man bÃ¼yÃ¼klÃ¼ÄŸÃ¼ **16MB sÄ±nÄ±rÄ±na** ulaÅŸabilir.  
âŒ **FarklÄ± koleksiyonlarda ayrÄ± ayrÄ± kullanmak zordur.**  

**â¡ KullanÄ±m AlanÄ±:**  
- **Adres, profil bilgileri, ayarlar gibi verilerin** bulunduÄŸu durumlarda kullanÄ±lÄ±r.  

---

## **ğŸ“Œ 2ï¸âƒ£ References (ObjectId ile BaÄŸlantÄ± - `populate()`)**  

**TanÄ±m:**  
- **BaÄŸÄ±msÄ±z dokÃ¼manlar birbirine ObjectId ile baÄŸlanÄ±r.**  
- **Ä°liÅŸkili veriler farklÄ± koleksiyonlarda tutulur.**  
- **Daha esnektir ve bÃ¼yÃ¼k veri setleri iÃ§in uygundur.**  

ğŸ“Œ **Ã–rnek:** **Bir kullanÄ±cÄ±nÄ±n sipariÅŸleri (orders)**  

```javascript
const userSchema = new mongoose.Schema({
  name: String,
  email: String,
  orders: [{ type: mongoose.Schema.Types.ObjectId, ref: "Order" }]
});

const orderSchema = new mongoose.Schema({
  userId: { type: mongoose.Schema.Types.ObjectId, ref: "User" },
  total: Number,
  items: [{ name: String, price: Number }]
});

export const User = mongoose.model("User", userSchema);
export const Order = mongoose.model("Order", orderSchema);
```

ğŸ“Œ **Veriyi Kaydetme:**
```javascript
const newOrder = new Order({
  userId: "605c72b1234567890abcdef",
  total: 200,
  items: [{ name: "Laptop", price: 2000 }]
});
await newOrder.save();
```

ğŸ“Œ **Ä°liÅŸkili Veriyi Getirme (`populate()` KullanÄ±mÄ±):**
```javascript
const user = await User.find().populate("orders");
console.log(user);
```

ğŸ“Œ **AvantajlarÄ±:**
âœ… **Daha esnektir**, iliÅŸkili veriler farklÄ± koleksiyonlarda saklanabilir.  
âœ… **BÃ¼yÃ¼k veri setleri iÃ§in idealdir**, Ã§Ã¼nkÃ¼ her veri ayrÄ± koleksiyonda yÃ¶netilir.  

ğŸ“Œ **DezavantajlarÄ±:**
âŒ **Veriyi almak iÃ§in `populate()` kullanÄ±lÄ±r**, bu da performans maliyeti yaratabilir.  
âŒ **Tek sorguda veriyi getirmek zorlaÅŸabilir.**  

**â¡ KullanÄ±m AlanÄ±:**  
- **BÃ¼yÃ¼k veri setleri ve dinamik iliÅŸkiler** iÃ§in kullanÄ±lÄ±r.  
- **KullanÄ±cÄ±-SipariÅŸ, Ã–ÄŸrenci-Kurs, Film-AktÃ¶r gibi iliÅŸkilerde** tercih edilir.  

---

## **ğŸ“Œ 3ï¸âƒ£ MongoDB'de Ä°liÅŸkileri YÃ¶netmek Ä°Ã§in Gerekenler**
| **Gereksinim** | **AÃ§Ä±klama** | **Ne Zaman KullanÄ±lmalÄ±?** |
|----------------|-------------|----------------|
| **Embedded Documents** | Ä°Ã§ iÃ§e geÃ§miÅŸ dokÃ¼manlarla veri saklama | **KÃ¼Ã§Ã¼k ve sabit veriler** (adres, profil vb.) |
| **References (ObjectId)** | ObjectId kullanarak iki koleksiyonu baÄŸlama | **BÃ¼yÃ¼k ve ayrÄ± sorgulanmasÄ± gereken veriler** |
| **`populate()`** | ObjectId referanslarÄ±nÄ± otomatik doldurma | **Ä°liÅŸkili verileri Ã§aÄŸÄ±rÄ±rken** |

---

## **ğŸ”¥ MongoDB'de Ä°liÅŸki SeÃ§imi NasÄ±l YapÄ±lÄ±r?**
- **KÃ¼Ã§Ã¼k ve sabit veriler** iÃ§in â†’ **Embedded Documents**  
- **BÃ¼yÃ¼k ve ayrÄ± yÃ¶netilmesi gereken veriler** iÃ§in â†’ **References (ObjectId)**  
- **Ä°liÅŸkili verileri Ã§aÄŸÄ±rmak iÃ§in** â†’ **`populate()` kullanÄ±lÄ±r.**  

ğŸš€ **Sonraki adÄ±m:** **Mongoose'da `populate()` nasÄ±l kullanÄ±lÄ±r?** ğŸš€