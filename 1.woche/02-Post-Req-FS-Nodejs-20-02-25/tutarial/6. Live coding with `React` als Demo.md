# **6. React ile Live Coding: POST Request ile Veri GÃ¶nderme ve FS KullanÄ±mÄ±**  

Bu bÃ¶lÃ¼mde **React ile bir form oluÅŸturarak** **Express.js backendâ€™ine veri gÃ¶ndereceÄŸiz** ve **bu veriyi FS (File System) modÃ¼lÃ¼ ile kaydedeceÄŸiz**.  

âœ… **Reactâ€™te bir form ile kullanÄ±cÄ±dan veri alacaÄŸÄ±z.**  
âœ… **Express.js backendâ€™ine bir POST isteÄŸi gÃ¶ndereceÄŸiz.**  
âœ… **Node.js ile FS modÃ¼lÃ¼ kullanarak veriyi `users.json` dosyasÄ±na kaydedeceÄŸiz.**  

---

## **ğŸ“Œ 1. Proje YapÄ±sÄ±**
```bash
my_project/
â”‚â”€â”€ backend/ (Express.js Sunucusu)
â”‚   â”œâ”€â”€ server.js (Sunucu ve FS iÅŸlemleri)
â”‚   â”œâ”€â”€ users.json (KullanÄ±cÄ± verileri)
â”‚â”€â”€ frontend/ (React UygulamasÄ±)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.js (Ana BileÅŸen)
â”‚   â”‚   â”œâ”€â”€ Form.js (Form BileÅŸeni)
â”‚â”€â”€ package.json
```

---

## **ğŸ“Œ 2. Backend (Express.js ve FS ile API)**
ğŸ“Œ **Backend iÃ§inde Express.js kullanarak bir POST endpoint oluÅŸturacaÄŸÄ±z.**  
ğŸ“Œ **KullanÄ±cÄ±nÄ±n gÃ¶nderdiÄŸi veriyi `users.json` iÃ§ine kaydedeceÄŸiz.**  

#### **ğŸ“Œ AdÄ±m 1: Express.js ve FS ModÃ¼lÃ¼ ile Backend Kurulumu**
### **ğŸ›  Backend iÃ§in Gerekli Paketleri YÃ¼kleyelim**
```bash
mkdir backend && cd backend
npm init -y
npm install express cors fs
```

---

### **ğŸ“Œ AdÄ±m 2: Express.js Sunucusunu OluÅŸtur**
ğŸ“Œ **`backend/server.js` DosyasÄ±nÄ± OluÅŸtur ve AÅŸaÄŸÄ±daki Kodu Ekleyelim**  

```javascript
import express from "express";
import fs from "fs";
import cors from "cors";

const app = express();
const PORT = 3001;

// Middleware
app.use(express.json()); // JSON verilerini iÅŸlemek iÃ§in
app.use(cors()); // CORS hatalarÄ±nÄ± Ã¶nlemek iÃ§in

const FILE_PATH = "users.json"; // KullanÄ±cÄ± verilerini saklayacaÄŸÄ±mÄ±z dosya

// KullanÄ±cÄ±yÄ± Kaydet (POST Request)
app.post("/users", (req, res) => {
    const newUser = req.body; // GÃ¶nderilen veriyi al

    // Dosya iÃ§eriÄŸini oku
    fs.readFile(FILE_PATH, "utf-8", (err, data) => {
        let users = [];
        if (!err) {
            users = JSON.parse(data || "[]"); // JSON verisini parse et
        }
        users.push(newUser); // Yeni kullanÄ±cÄ±yÄ± ekle

        // Yeni veriyi dosyaya yaz
        fs.writeFile(FILE_PATH, JSON.stringify(users, null, 2), (err) => {
            if (err) {
                return res.status(500).json({ message: "Dosyaya yazÄ±lamadÄ±" });
            }
            res.status(201).json({ message: "KullanÄ±cÄ± eklendi", user: newUser });
        });
    });
});

// Sunucuyu baÅŸlat
app.listen(PORT, () => {
    console.log(`ğŸš€ Server is running on port ${PORT}`);
});
```
âœ… **Bu backend, React uygulamasÄ±ndan gelen kullanÄ±cÄ± verilerini alacak ve `users.json` dosyasÄ±na kaydedecek.**  
âœ… **CORS middlewareâ€™i sayesinde React ile iletiÅŸim kurabilecek.**  

---

## **ğŸ“Œ 3. Frontend (React ile KullanÄ±cÄ± Formu)**
Åimdi **React iÃ§inde bir form** oluÅŸturarak **backendâ€™e veri gÃ¶ndereceÄŸiz.**

ğŸ“Œ **React projesini oluÅŸtur ve Express.js backendâ€™i ile haberleÅŸmesi iÃ§in `axios` kÃ¼tÃ¼phanesini ekle.**
```bash
mkdir frontend && cd frontend
npx create-react-app my-app
cd my-app
npm install axios
```

---

### **ğŸ“Œ AdÄ±m 1: React Ä°Ã§inde KullanÄ±cÄ± Formu BileÅŸeni (`Form.js`)**
ğŸ“Œ **`frontend/src/Form.js` oluÅŸtur ve ÅŸu kodlarÄ± ekle:**
```javascript
import { useState } from "react";
import axios from "axios";

const Form = () => {
    const [name, setName] = useState("");
    const [email, setEmail] = useState("");

    const handleSubmit = async (e) => {
        e.preventDefault();

        try {
            const response = await axios.post("http://localhost:3001/users", {
                name,
                email,
            });

            alert("KullanÄ±cÄ± Eklendi: " + JSON.stringify(response.data.user));
            setName("");
            setEmail("");
        } catch (error) {
            console.error("Hata:", error);
            alert("KullanÄ±cÄ± eklenirken hata oluÅŸtu!");
        }
    };

    return (
        <form onSubmit={handleSubmit}>
            <h2>KullanÄ±cÄ± Ekle</h2>
            <input
                type="text"
                placeholder="AdÄ±nÄ±z"
                value={name}
                onChange={(e) => setName(e.target.value)}
                required
            />
            <input
                type="email"
                placeholder="E-posta"
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                required
            />
            <button type="submit">GÃ¶nder</button>
        </form>
    );
};

export default Form;
```
âœ… **KullanÄ±cÄ±dan ad ve e-posta alÄ±r ve backendâ€™e `axios.post` ile gÃ¶nderir.**  
âœ… **BaÅŸarÄ±lÄ± olursa eklenen kullanÄ±cÄ±yÄ± alert olarak gÃ¶sterir.**  

---

### **ğŸ“Œ AdÄ±m 2: `App.js` Ä°Ã§inde KullanÄ±cÄ± Formunu Ã‡aÄŸÄ±rma**
ğŸ“Œ **`frontend/src/App.js` dosyasÄ±nÄ± ÅŸu ÅŸekilde gÃ¼ncelle:**
```javascript
import Form from "./Form";

function App() {
    return (
        <div>
            <h1>React + Express FS Demo</h1>
            <Form />
        </div>
    );
}

export default App;
```

---

## **ğŸ“Œ 4. Projeyi Ã‡alÄ±ÅŸtÄ±rma**
### **Backendâ€™i BaÅŸlat**
```bash
cd backend
node server.js
```
âœ… **Sunucu Ã§alÄ±ÅŸÄ±yor olmalÄ±:**  
```
ğŸš€ Server is running on port 3001
```

### **Frontendâ€™i BaÅŸlat**
```bash
cd frontend/my-app
npm start
```
âœ… **TarayÄ±cÄ±da aÃ§:**  
ğŸ‘‰ `http://localhost:3000`

---

## **ğŸ“Œ 5. Test: KullanÄ±cÄ± Ekleyelim**
1ï¸âƒ£ **TarayÄ±cÄ±da formu doldur:**  
- Ad: **Ahmet**  
- E-posta: **ahmet@example.com**  
- **GÃ¶nder** butonuna bas.  

ğŸ“Œ **EÄŸer iÅŸlem baÅŸarÄ±lÄ± olursa:**  
âœ… **Reactâ€™ta alert Ã§Ä±kar:**  
```
KullanÄ±cÄ± Eklendi: {"name": "Ahmet", "email": "ahmet@example.com"}
```
âœ… **`users.json` dosyasÄ±na yazÄ±lÄ±r:**
```json
[
  {
    "name": "Ahmet",
    "email": "ahmet@example.com"
  }
]
```

âœ… **Backend Logu (Terminalde gÃ¶rÃ¼nmeli)**
```
Yeni KullanÄ±cÄ±: Ahmet ahmet@example.com
```

---

## **ğŸ“Œ Ã–zet**
âœ… **React ile form oluÅŸturduk ve kullanÄ±cÄ±dan veri aldÄ±k.**  
âœ… **Express.js backendâ€™ine POST request gÃ¶nderdik.**  
âœ… **FS modÃ¼lÃ¼ ile `users.json` iÃ§ine kaydettik.**  
âœ… **CORS middleware kullanarak frontend-backend iletiÅŸimini saÄŸladÄ±k.**  

ğŸš€ **Sonraki AdÄ±m:** **Reactâ€™te kullanÄ±cÄ± listesini gÃ¶sterme ve verileri Ã§ekme!** ğŸ¯